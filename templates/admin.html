<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
  body{ font-family: Arial; background:#f4f6fb; margin:0; }
  .header{ background:#222; color:#fff; padding:15px; text-align:center; }
  .box{ background:#fff; margin:15px; padding:15px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,.08); }
  a{ color:#667eea; text-decoration:none; }
  input, button{ padding:8px; margin:4px 0; border-radius:6px; border:1px solid #ccc; width:100%; }
  button{ background:#667eea; color:#fff; border:none; }
  .danger{ background:#e74c3c; }
  .user-card{ border:1px solid #eee; padding:10px; border-radius:8px; margin-bottom:10px; }
  .row{ display:grid; grid-template-columns: 1fr 1fr; gap:6px; }
  .actions{ display:flex; gap:6px; margin-top:6px; }
</style>
</head>
<body>
<div class="header"><h2>ğŸ›  Admin Panel</h2></div>

<div class="box">
  <h3>All Users (View / Update / Delete)</h3>

  {% for uname, u in users.items() %}
  <div class="user-card">
    <strong>{{uname}}</strong>

    <!-- Update username/password -->
    <form method="post" action="/admin/update_user">
      <input type="hidden" name="old_username" value="{{uname}}">
      <div class="row">
        <input name="new_username" placeholder="New username (optional)">
        <input name="new_password" placeholder="New password (optional)">
      </div>
      <button>Update</button>
    </form>

    <!-- View user data -->
    <div class="actions">
      <a href="/admin/user/{{uname}}">ğŸ‘€ View</a>

      {% if uname != session['user'] %}
      <form method="post" action="/admin/delete_user/{{uname}}" onsubmit="return confirm('Delete user {{uname}} ? This will remove all files & links!');">
        <button class="danger">ğŸ—‘ï¸ Delete</button>
      </form>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

<div class="box" style="text-align:center;">
  <a href="/dashboard">â¬… Back</a> | <a href="/logout">ğŸšª Logout</a>
</div>
</body>
</html>
